<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="/css/b ootstrap.css" th:href="@{/css/bootstrap.css}">
  <script src="/js/jquery-3.6.1.js" th:src="@{/js/jquery-3.6.1.js}"></script>
  <script src="/js/bootstrap.bundle.js" th:src="@{/js/bootstrap.bundle.js}"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/lux/bootstrap.min.css">

  <script th:inline="javascript">
    /*<![CDATA[*/
    const memberId = [[${session.member.memId}]];
    /*]]>*/
    $(document).ready(function () {

      // 돌아가기 버튼
      $('#btn-back').on('click', function () {
        history.back();
      });

      $('#btn-my-review').on('click', function () {
        const frm = $('#frm')[0]; // [0] <- form 객체의 첫번째 것을 찾는다는 뜻. 안써도 상관없음(form 태그가 여러개 사용하는 페이지에서 사용)
        frm.action = '/myReviewPage';
        frm.submit();
      });

      $('#btn-edit-my-info').on('click', function () {
        const frm = $('#frm')[0];
        frm.action = '/updateInfo';
        frm.submit();
      });

      aaa();
    });


    function aaa() {
      $.ajax({
        type: "post",
        url: "/test",
        data: {memId: memberId},
        success: function (data) {
          console.log(data.memId);
          console.log(data.rvQty);
          $('#rvQty').text(data.rvQty);
        },
        error: function (request, status, error) {
          alert("실패");
        }
      });
    }
  </script>
</head>
<body>
<main>
  <h2 class="text-center mt-5" id="sessionId" th:text="${session.member.getMemId()} + '님의 마이페이지'"></h2>
  <br><br>
  <div class="container">
    <!--    enctype = ? -->
    <form method="post" enctype="multipart/form-data" id="frm">
      <div class="row-cols-2">
        <div class="col mx-auto">
          <ul class="list-group">
            <button type="button" class="list-group-item d-flex justify-content-between align-items-center"
                    id="btn-my-review">
              작성한 리뷰 확인
              <h5><span class="badge rounded-pill bg-danger" id="rvQty"></span></h5>
            </button>
            <button type="button"
                    class="list-group-item d-flex justify-content-between align-items-center justify-content-center"
                    id="btn-edit-my-info">
              내 정보 수정
            </button>
            <button type="button" class="list-group-item d-flex justify-content-between align-items-center"
                    id="btn-back">
              돌아가기
            </button>
          </ul>
        </div>
      </div>
    </form>
  </div>
</main>
</body>
</html>