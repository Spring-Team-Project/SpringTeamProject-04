<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="/css/bootstrap.css" th:href="@{/css/bootstrap.css}">
  <script src="/js/jquery-3.6.1.js" th:src="@{/js/jquery-3.6.1.js}"></script>
  <script src="/js/bootstrap.bundle.js" th:src="@{/js/bootstrap.bundle.js}"></script>
</head>
<body>
<h1>Restful 방식 웹페이지 만들기</h1>
<h2>인터페이스 구현</h2>

<div id="map" style="width:100%; height: 100vh;"></div>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAfbiB23wXLqaqgI4XV3CPYW0bI2ciduMY&callback=initMap&region=kr"></script>
<script>
  var parmarcyInfo;
  var map;

  const locations = [];

  function initMap() {

    var apiUrl = "http://localhost:8080/ermctInsttInfoInqireService";
    $.ajax({
      type: "GET",
      url: apiUrl,
      contentType : "application/json",
      error: function() {
        console.log('통신실패!!');
      },
      success: function(data) {
        console.log(data)
        var jObj = data.data[0];

        for(var i =0; i < data.data.length; i++){
          var place = data.data[i].dutyName;
          var wgs84Lat = data.data[i].wgs84Lat;
          var wgs84Lon = data.data[i].wgs84Lon;

          locations.push({place, wgs84Lat, wgs84Lon})

        }
      }

    });

    var seoul = { lat: 37.5642135 ,lng: 127.0016985 };
    map = new google.maps.Map( document.getElementById('map'), {
      zoom: 12,
      center: seoul
    });
    new google.maps.Marker({
      position: seoul,
      map: map,
      label: "서울 중심 좌표"
    });

  }


</script>

</body>
</html>



